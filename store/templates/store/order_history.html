{% extends 'store/base.html' %}
{% block content %}

    <h2>My order history</h2>

    {% if not orders %}
        <p>You haven't made any orders yet.</p>
        <a href="{% url 'category-list' %}">Start shopping</a>
    {% else %}
        {% for order in orders %}
        <div style="border: 1px solid #ccc; margin-bottom: 20px; padding: 15px; background-color: #f9f9f9;">
            <h4 style="margin: 0 0 10px 0; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
                Order â„– {{order.id}}
                <span style="font-weight: normal; color: #555;">(from {{order.created_at|date:"d.m.Y"}})</span>
                <span style="float: right;">Total: {{order.get_total_cost}} $</span>
            </h4>

            <p style="margin: 5px 0;">
                <strong>Recipient:</strong> {{order.first_name}} {{order.last_name}}<br>
                <strong>Address:</strong> {{order.address}}<br>
                <strong>Phone:</strong> {{order.phone}}
            </p>

            <table border="1" cellpadding="5" style="width: 100%; border-collapse: collapse; background-color: white;">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Item total price</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.items.all %}
                        <tr>
                            <th>{{item.product.name}}</th>
                            <th>{{item.price}}</th>
                            <th>{{item.quantity}}</th>
                            <th>{{item.get_cost}}</th>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>

        {% endfor %}
    {% endif %}

{% endblock %}